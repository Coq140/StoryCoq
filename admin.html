<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Admin Panel Simple</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background: #fafafa; }
  table { border-collapse: collapse; width: 100%; }
  th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
  th { background: #333; color: white; }
  .badge { font-size: 18px; margin-right: 5px; }
  .logo { width: 30px; height: 30px; vertical-align: middle; border-radius: 3px; margin-right: 5px; }
  button { cursor: pointer; padding: 5px 10px; margin: 0 3px; }
</style>
</head>
<body>

<h1>Panel Admin Simple</h1>

<table id="usersTable">
  <thead>
    <tr>
      <th>Utilisateur</th>
      <th>Mot de passe</th>
      <th>Badges</th>
      <th>Affili√© √†</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
const entreprises = {
  'AcmeCorp': { name: "Acme Corporation", logo: "https://via.placeholder.com/30?text=A" },
  'TechInc': { name: "Tech Incorporated", logo: "https://via.placeholder.com/30?text=T" }
};

// Chargement utilisateurs depuis localStorage ou initialisation par d√©faut
let users = JSON.parse(localStorage.getItem('users')) || [
  { id: 1, name: "Alice", password: "alice123", badges: ["admin", "vip"], affiliateWith: "AcmeCorp" },
  { id: 2, name: "Bob", password: "bob456", badges: ["staff"], affiliateWith: "TechInc" },
  { id: 3, name: "Charlie", password: "charlie789", badges: [], affiliateWith: null }
];

function saveUsers(){
  localStorage.setItem('users', JSON.stringify(users));
}

function renderUsers(){
  const tbody = document.querySelector('#usersTable tbody');
  tbody.innerHTML = '';

  users.forEach(user => {
    const tr = document.createElement('tr');

    // Nom
    const tdName = document.createElement('td');
    tdName.textContent = user.name;
    tr.appendChild(tdName);

    // Mot de passe (affichage simple)
    const tdPwd = document.createElement('td');
    tdPwd.textContent = user.password;
    tr.appendChild(tdPwd);

    // Badges
    const tdBadges = document.createElement('td');
    if(user.badges && user.badges.length > 0){
      user.badges.forEach(b => {
        const span = document.createElement('span');
        span.className = 'badge';
        if(b === 'admin') span.textContent = 'üõ°Ô∏è';
        else if(b === 'staff') span.textContent = '‚≠ê';
        else if(b === 'vip') span.textContent = 'üíé';
        else span.textContent = b;
        tdBadges.appendChild(span);
      });
    } else {
      tdBadges.textContent = '‚Äî';
    }
    tr.appendChild(tdBadges);

    // Affili√© √†
    const tdAffiliate = document.createElement('td');
    if(user.affiliateWith && entreprises[user.affiliateWith]){
      const img = document.createElement('img');
      img.src = entreprises[user.affiliateWith].logo;
      img.alt = entreprises[user.affiliateWith].name;
      img.title = entreprises[user.affiliateWith].name;
      img.className = 'logo';
      tdAffiliate.appendChild(img);
      tdAffiliate.appendChild(document.createTextNode(entreprises[user.affiliateWith].name));
    } else {
      tdAffiliate.textContent = '‚Äî';
    }
    tr.appendChild(tdAffiliate);

    // Actions : bouton supprimer
    const tdActions = document.createElement('td');
    const btnDel = document.createElement('button');
    btnDel.textContent = "Supprimer";
    btnDel.onclick = () => {
      if(confirm(`Supprimer le compte de ${user.name} ?`)){
        users = users.filter(u => u.id !== user.id);
        saveUsers();
        renderUsers();
      }
    };
    tdActions.appendChild(btnDel);
    tr.appendChild(tdActions);

    tbody.appendChild(tr);
  });
}

renderUsers();
</script>

</body>
</html>
